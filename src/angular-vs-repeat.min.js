!function(a,b){"use strict";function c(){if("pageYOffset"in a)return{scrollTop:pageYOffset,scrollLeft:pageXOffset};var b,c,d=document,e=d.documentElement,f=d.body;return b=e.scrollLeft||f.scrollLeft||0,c=e.scrollTop||f.scrollTop||0,{scrollTop:c,scrollLeft:b}}function d(b,c){return b===a?"clientWidth"===c?a.innerWidth:a.innerHeight:b[c]}function e(b,d){return b===a?c()[d]:b[d]}function f(b,d,e){var f=b.getBoundingClientRect()[e?"left":"top"],g=d===a?0:d.getBoundingClientRect()[e?"left":"top"],h=f-g+(d===a?c():d)[e?"scrollLeft":"scrollTop"];return h}var g=-1!=navigator.appVersion.indexOf("Mac"),h="undefined"!=typeof a.onwheel?"wheel":"undefined"!=typeof a.onmousewheel?"mousewheel":"DOMMouseScroll",i=document.documentElement,j=i.matches?"matches":i.matchesSelector?"matchesSelector":i.webkitMatches?"webkitMatches":i.webkitMatchesSelector?"webkitMatchesSelector":i.msMatches?"msMatches":i.msMatchesSelector?"msMatchesSelector":i.mozMatches?"mozMatches":i.mozMatchesSelector?"mozMatchesSelector":null,k=b.element.prototype.closest||function(a){for(var c=this[0].parentNode;c!==document.documentElement&&null!=c&&!c[j](a);)c=c.parentNode;return c&&c[j](a)?b.element(c):b.element()};b.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(c){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(a){this.$scrollParent=a.$scrollParent,this.$fillElement=a.$fillElement}],compile:function(i,j){var l=b.isDefined(j.vsRepeatContainer)?b.element(i[0].querySelector(j.vsRepeatContainer)):i,m=l.children().eq(0),n=m.attr("ng-repeat")||m.attr("data-ng-repeat"),o=m[0].outerHTML,p=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(n),q=p[1],r=p[2],s=p[3],t="$vs_collection",u={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsScrolledToEndOffset:"scrolledToEndOffset",vsExcess:"excess"};return l.empty(),a.getComputedStyle&&"absolute"===a.getComputedStyle(l[0]).position||l.css("position","relative"),{pre:function(i,j,m,n){function p(a,c){if(!H||H.length<1)return i[t]=[],D=0,z(0),void(i.sizesCumulative=[0]);if(D=H.length,K){i.sizes=H.map(function(a){var c=i.$new(!1);b.extend(c,a),c[q]=a;var d=m.vsSize||m.vsSizeProperty?c.$eval(m.vsSize||m.vsSizeProperty):i.elementSize;return c.$destroy(),d});var d=0;i.sizesCumulative=i.sizes.map(function(a){var b=d;return d+=a,b}),i.sizesCumulative.push(d)}else v();y(c)}function v(){J&&i.$$postDigest(function(){if(l[0].offsetHeight||j[0].offsetWidth)for(var a=l.children(),b=0;b<a.length;){if(null!=a[b].attributes["ng-repeat"]||null!=a[b].attributes["data-ng-repeat"]){a[b][Q]&&(i.elementSize=a[b][Q],y(),J=!1,i.$root&&!i.$root.$$phase&&i.$apply());break}b++}else var c=i.$watch(function(){(l[0].offsetHeight||l[0].offsetWidth)&&(c(),v())})})}function w(a){var b=a.currentTarget;(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight)&&E.css("display","block")}function x(){"undefined"!=typeof m.vsAutoresize&&(J=!0,v(),i.$root&&!i.$root.$$phase&&i.$apply()),C()&&(i.$apply(),i.$broadcast("vsSetOffset-refresh"))}function y(a){U=void 0,V=void 0,W=D,X=0,C(a),z(K?i.sizesCumulative[D]:i.elementSize*D),i.$evalAsync(function(){i.$broadcast("vsSetOffset-refresh")}),i.$emit("vsRepeatReinitialized",i.startIndex,i.endIndex)}function z(a){if(I){if(F.css({width:i.offsetBefore+a+i.offsetAfter+"px",height:"100%"}),n&&n.$fillElement){var b=n.$fillElement[0].parentNode.querySelector("[ng-repeat]");b&&n.$fillElement.css({width:b.scrollWidth+"px"})}}else F.css({height:i.offsetBefore+a+i.offsetAfter+"px",width:"100%"}),n&&n.$fillElement&&(b=n.$fillElement[0].parentNode.querySelector("[ng-repeat]"),b&&n.$fillElement.css({height:b.scrollHeight+"px"}))}function A(){var a=d(L[0],P);a!==Y&&(y(),i.$root&&!i.$root.$$phase&&(i.$apply(),i.$broadcast("vsSetOffset-refresh"))),Y=a}function B(a){var b=!1;return void 0!==a&&"number"==typeof a&&(b=Math.max(a,0),L[0][R]!==b?(L[0][R]=b,N=!0):b=!1,i.$emit("vsRepeatScrolled",b)),b}function C(a){var b,c,g,h,j=e(L[0],R),k=d(L[0],P),n=l[0]===L[0]?0:f(l[0],L[0],I),o=!0,p=i.startIndex,q=i.endIndex;if(a&&void 0!==a.elementSize&&(i.elementSize=a.elementSize),a&&void 0!==a.scrollIndex){if("undefined"!=typeof i.scrollSettings&&(i.scrollSettings.scrollIndex=a.scrollIndex),K?(h=i.sizes[a.scrollIndex],g=i.sizesCumulative[a.scrollIndex]):(h=i.elementSize,g=a.scrollIndex*i.elementSize),void 0!==a.scrollIndexPosition)switch("undefined"!=typeof i.scrollSettings&&(i.scrollSettings.scrollIndexPosition=a.scrollIndexPosition),b=0,typeof a.scrollIndexPosition){case"number":b=a.scrollIndexPosition+i.offsetBefore;break;case"string":switch(a.scrollIndexPosition){case"top":b=i.offsetBefore;break;case"middle":b=(k-h)/2;break;case"bottom":b=k-h-i.offsetAfter;break;case"inview":case"inview#top":case"inview#middle":case"inview#bottom":case"inview#auto":L[0][R]<=g&&L[0][R]+k-h>=g?(o=!1,b=g-L[0][R]):(("inview#top"===a.scrollIndexPosition||"inview"===a.scrollIndexPosition)&&(b=i.offsetBefore),"inview#bottom"===a.scrollIndexPosition&&(b=k-h+i.offsetAfter),"inview#middle"===a.scrollIndexPosition&&(b=(k-h)/2),"inview#auto"===a.scrollIndexPosition&&(b=L[0][R]<=g?k-h+i.offsetAfter:i.offsetBefore));break;default:console.warn("Incorrect scrollIndexPosition string value")}break;default:console.warn("Incorrect scrollIndexPosition type")}else o=!1,b=K?i.sizesCumulative[a.scrollIndex]-L[0][R]:a.scrollIndex*i.elementSize-L[0][R];if(p=a.scrollIndex,K){for(;i.sizesCumulative[p]>i.sizesCumulative[a.scrollIndex]-b;)p--;for(c=Math.max(p,0),p=Math.max(Math.floor(p-i.excess/2),0),q=p;i.sizesCumulative[q]<i.sizesCumulative[c]-i.offsetBefore+k;)q++;q=Math.min(Math.ceil(q+i.excess/2),D)}else{for(;p*i.elementSize>a.scrollIndex*i.elementSize-b;)p--;c=Math.max(p,0),p=Math.max(Math.floor(p-i.excess/2),0),q=Math.min(p+Math.ceil(k/i.elementSize)+i.excess/2,D)}}else if(K){for(p=0;i.sizesCumulative[p]<j-i.offsetBefore-n;)p++;for(p>0&&p--,p=Math.max(Math.floor(p-i.excess/2),0),q=p;i.sizesCumulative[q]<j-i.offsetBefore-n+k;)q++;q=Math.min(Math.ceil(q+i.excess/2),D)}else p=Math.max(Math.floor((j-i.offsetBefore-n)/i.elementSize)-i.excess/2,0),q=Math.min(p+Math.ceil(k/i.elementSize)+i.excess,D);W=Math.min(p,W),X=Math.max(q,X),i.startIndex=O.latch?W:p,i.endIndex=O.latch?X:q,void 0!==a&&void 0!==a.scrollIndex&&void 0!==b&&o&&B(g-b);var r=!1;if(null==U?r=!0:null==V&&(r=!0),r||(O.hunked?Math.abs(i.startIndex-U)>=i.excess/2||0===i.startIndex&&0!==U?r=!0:(Math.abs(i.endIndex-V)>=i.excess/2||i.endIndex===D&&V!==D)&&(r=!0):r=i.startIndex!==U||i.endIndex!==V),r){if(i[t]=H.slice(i.startIndex,i.endIndex),i.$emit("vsRepeatInnerCollectionUpdated",i.startIndex,i.endIndex,U,V),m.vsScrolledToEnd){var s=H.length-(i.scrolledToEndOffset||0);i.endIndex>=s&&s>V&&i.$eval(m.vsScrolledToEnd)}U=i.startIndex,V=i.endIndex}return r}var D,E,F,G=b.element(o),H=[],I="undefined"!=typeof m.vsHorizontal,J=!m.vsRepeat,K=!!m.vsSize||!!m.vsSizeProperty,L=m.vsScrollParent?"window"===m.vsScrollParent?b.element(a):k.call(l,m.vsScrollParent):l,M=I?"left":"top",N=!1,O="vsOptions"in m?i.$eval(m.vsOptions):{},P=I?"clientWidth":"clientHeight",Q=I?"offsetWidth":"offsetHeight",R=I?"scrollLeft":"scrollTop";if(!("vsSize"in m)&&"vsSizeProperty"in m&&console.warn("vs-size-property attribute is deprecated. Please use vs-size attrubute which also accepts angular expressions."),0===L.length)throw"Specified scroll parent selector did not match any element";i.$scrollParent=L,K&&(i.sizesCumulative=[]),i.elementSize=+m.vsRepeat||d(L[0],P)||50,i.offsetBefore=0,i.offsetAfter=0,i.excess=2,i.scrollSettings={scrollIndex:0,scrollIndexPosition:"top"},i.$watch(m.vsScrollSettings,function(a){"undefined"!=typeof a&&(i.scrollSettings=a,y(i.scrollSettings))},!0),Object.keys(u).forEach(function(a){m[a]&&m.$observe(a,function(b){i[u[a]]=+b,y()})}),i.$watchCollection(r,function(a){H=a||[],p()}),G.attr("ng-repeat",q+" in "+t+(s?" "+s:"")).addClass("vs-repeat-repeated-element");var S=K?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)";G.attr("vs-set-offset",S),G.attr("vs-set-offset-positioning-property",M),c(G)(i),l.append(G),F=b.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),l.append(F),c(F)(i),i.$fillElement=F;var T={};g&&"window"!==m.vsScrollParent&&(E=b.element('<div class="vs-repeat-wheel-helper"></div>').on(h,function(a){a.preventDefault(),a.stopPropagation(),a.originalEvent&&(a=a.originalEvent),L[0].scrollLeft+=a.deltaX||-a.wheelDeltaX,L[0].scrollTop+=a.deltaY||-a.wheelDeltaY}).on("mousemove",function(a){(T.x!==a.clientX||T.y!==a.clientY)&&b.element(this).css("display","none"),T={x:a.clientX,y:a.clientY}}).css("display","none"),F.append(E)),i.startIndex=0,i.endIndex=0,L.on("scroll",function(){N?N=!1:C()&&(i.$apply(),i.$broadcast("vsSetOffset-refresh"))}),g&&L.on(h,w),b.element(a).on("resize",x),i.$on("$destroy",function(){b.element(a).off("resize",x)}),i.$on("vsRepeatTrigger",p),i.$on("vsRepeatResize",function(){J=!0,v()});var U,V,W,X,Y;i.$watch(function(){"function"==typeof a.requestAnimationFrame?a.requestAnimationFrame(A):A()})}}}}}]).directive("vsSetOffset",[function(){return function(a,b,c){function d(){b.css(e,a.$eval(c.vsSetOffset)+"px")}var e=c.vsSetOffsetPositioningProperty;d(),a.$on("vsSetOffset-refresh",d)}}]),b.element(document.head).append(["<style>.vs-repeat-wheel-helper{position: absolute;top: 0;bottom: 0;left: 0;right: 0;z-index: 99999;background: rgba(0, 0, 0, 0);}.vs-repeat-repeated-element{position: absolute;z-index: 1;}</style>"].join(""))}(window,window.angular);